{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/refs.js","../src/js/helpers.js","../src/js/modal.js","../src/js/products-api.js","../src/js/render-function.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["export const API_BASE_URL = 'https://dummyjson.com';\nexport const API_ENDPOINTS = {\n  CATEGORIES: 'products/category-list',\n  PRODUCTS: 'products',\n  CATEGORY: 'products/category/',\n};\nexport const PER_PAGE = 12;\nexport let PAGE = 1;\nexport const STATE = {\n  QUERY: '',\n  PAGE: 1,\n};\n","export const refs = {\n  categoriesList: document.querySelector('ul.categories'),\n  productsList: document.querySelector('ul.products'),\n  notFoundBlock: document.querySelector('div.not-found'),\n  modal: document.querySelector('div.modal'),\n  modalProduct: document.querySelector('div.modal-product'),\n  closeModalBtn: document.querySelector('.modal__close-btn'),\n};\n","import { refs } from './refs';\n\nexport function clearProductsList() {\n  refs.productsList.innerHTML = '';\n}\n\nexport function updateActiveCategory(activeEl) {\n  const oldActiveEl = document.querySelector('.categories__btn--active');\n  if (oldActiveEl) {\n    oldActiveEl.classList.remove('categories__btn--active');\n  }\n  activeEl.classList.add('categories__btn--active');\n}\n\nexport function showNotFoundBlock() {\n  refs.notFoundBlock.classList.add('not-found--visible');\n}\n\nexport function hideNotFoundBlock() {\n  refs.notFoundBlock.classList.remove('not-found--visible');\n}\n","import { refs } from './refs';\n\nexport function openModal() {\n  refs.modal.classList.add('modal--is-open');\n  document.body.style.overflow = 'hidden';\n  window.addEventListener('keydown', handleEscapePress);\n  refs.modal.addEventListener('click', hanleBackdroppClick);\n}\n\nexport function closeModal() {\n  refs.modal.classList.remove('modal--is-open');\n  document.body.style.overflow = '';\n  window.removeEventListener('keydown', handleEscapePress);\n  refs.modal.removeEventListener('click', hanleBackdroppClick);\n}\n\nfunction handleEscapePress(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction hanleBackdroppClick(e) {\n  if (e.target === refs.modal) {\n    closeModal();\n  }\n}\n","import axios from 'axios';\nimport { API_BASE_URL, API_ENDPOINTS, PER_PAGE } from './constants';\n\naxios.defaults.baseURL = API_BASE_URL;\n\nexport async function getCategories() {\n  const response = await axios.get(API_ENDPOINTS.CATEGORIES);\n  return response.data;\n}\n\nexport async function getAllProducts(page) {\n  const skip = (page - 1) * 12;\n  const response = await axios.get(\n    `${API_ENDPOINTS.PRODUCTS}?limit=${PER_PAGE}&skip=${skip}`\n  );\n  return response.data;\n}\n\nexport async function getProductsByCategory(query, page) {\n  const skip = (page - 1) * 12;\n  const response = await axios.get(\n    `${API_ENDPOINTS.CATEGORY}${query}?limit=${PER_PAGE}&skip=${skip}`\n  );\n  return response.data;\n}\n\nexport async function getProductById(id) {\n  const response = await axios.get(`${API_ENDPOINTS.PRODUCTS}/${id}`);\n  return response.data;\n}\n","import { refs } from './refs';\n\nexport function renderCategories(categories) {\n  const categoriesList = ['All', ...categories];\n  const markup = categoriesList\n    .map(\n      item =>\n        `<li class=\"categories__item\">\n      <button class=\"categories__btn\" type=\"button\">${item}</button>\n    </li>`\n    )\n    .join('');\n  refs.categoriesList.innerHTML = markup;\n}\n\nexport function renderProducts(products) {\n  const markup = products\n    .map(\n      ({\n        id,\n        thumbnail,\n        description,\n        title,\n        brand,\n        category,\n        price,\n      }) => `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${description}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: </span>${\n      brand || 'no brand'\n    }</p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>`\n    )\n    .join('');\n  refs.productsList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function renderProduct(product) {\n  const {\n    images,\n    title,\n    description,\n    tags,\n    price,\n    shippingInformation,\n    returnPolicy,\n  } = product;\n  const markup = `<img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tags}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>`;\n  refs.modalProduct.innerHTML = markup;\n}\n","import { API_ENDPOINTS, STATE } from './constants';\nimport {\n  clearProductsList,\n  hideNotFoundBlock,\n  showNotFoundBlock,\n  updateActiveCategory,\n} from './helpers';\nimport { openModal } from './modal';\nimport {\n  getCategories,\n  getAllProducts,\n  getProductsByCategory,\n  getProductById,\n} from './products-api';\nimport { refs } from './refs';\nimport {\n  renderCategories,\n  renderProduct,\n  renderProducts,\n} from './render-function';\n\nexport async function initHomePage() {\n  try {\n    const categories = await getCategories();\n    renderCategories(categories);\n  } catch (err) {\n    console.error(`Get categories error: ${err}`);\n  }\n  try {\n    const { products } = await getAllProducts(STATE.PAGE);\n    renderProducts(products);\n  } catch (err) {\n    console.error(`Get products error: ${err}`);\n  }\n}\n\nexport async function handleCategoryClick(e) {\n  const btnElem = e.target.closest('.categories__btn');\n  if (!btnElem) {\n    return;\n  }\n  clearProductsList();\n  updateActiveCategory(btnElem);\n  hideNotFoundBlock();\n  STATE.PAGE = 1;\n  const query = btnElem.textContent;\n  if (query === 'All') {\n    try {\n      const { products } = await getAllProducts(STATE.PAGE);\n      renderProducts(products);\n    } catch (err) {\n      console.error(`Get products error: ${err}`);\n    }\n  } else {\n    STATE.QUERY = query;\n    try {\n      const { products } = await getProductsByCategory(STATE.QUERY, STATE.PAGE);\n      if (products.length === 0) {\n        showNotFoundBlock();\n      } else {\n        renderProducts(products);\n      }\n    } catch (err) {\n      console.error(`Get products error: ${err}`);\n    }\n  }\n}\n\nexport async function handleProductClick(e) {\n  const liElem = e.target.closest('li.products__item');\n  if (!liElem) {\n    return;\n  }\n  const id = liElem.dataset.id;\n  try {\n    const product = await getProductById(id);\n    renderProduct(product);\n    openModal();\n  } catch (err) {\n    console.error(`Get product error: ${err}`);\n  }\n}\n","import {\n  handleCategoryClick,\n  handleProductClick,\n  initHomePage,\n} from './js/handlers';\nimport { closeModal } from './js/modal';\nimport { refs } from './js/refs';\n\ndocument.addEventListener('DOMContentLoaded', initHomePage);\nrefs.categoriesList.addEventListener('click', handleCategoryClick);\nrefs.productsList.addEventListener('click', handleProductClick);\nrefs.closeModalBtn.addEventListener('click', closeModal);\n"],"names":["API_BASE_URL","API_ENDPOINTS","PER_PAGE","STATE","refs","clearProductsList","updateActiveCategory","activeEl","oldActiveEl","showNotFoundBlock","hideNotFoundBlock","openModal","handleEscapePress","hanleBackdroppClick","closeModal","e","axios","getCategories","getAllProducts","page","skip","getProductsByCategory","query","getProductById","id","renderCategories","categories","markup","item","renderProducts","products","thumbnail","description","title","brand","category","price","renderProduct","product","images","tags","shippingInformation","returnPolicy","initHomePage","err","handleCategoryClick","btnElem","handleProductClick","liElem"],"mappings":"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"}