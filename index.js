import"./assets/styles-DAE99nJD.js";import{a}from"./assets/vendor-2s9xPmg-.js";const P="https://dummyjson.com",i={CATEGORIES:"products/category-list",PRODUCTS:"products",CATEGORY:"products/category/",SEARCH:"products/search"},n=12,c={QUERY:"All",PAGE:1,FLAG:"All"};a.defaults.baseURL=P;async function v(){return(await a.get(i.CATEGORIES)).data}async function $(){const t=(c.PAGE-1)*n;return(await a.get(`${i.PRODUCTS}?limit=${n}&skip=${t}`)).data}async function b(){const t=(c.PAGE-1)*n;return(await a.get(`${i.CATEGORY}${c.QUERY}?limit=${n}&skip=${t}`)).data}async function k(){const t=(c.PAGE-1)*n;return(await a.get(`${i.SEARCH}?q=${c.QUERY}&limit=${n}&skip=${t}`)).data}async function S(t){return(await a.get(`${i.PRODUCTS}/${t}`)).data}const o={categoriesList:document.querySelector("ul.categories"),productsList:document.querySelector("ul.products"),notFoundBlock:document.querySelector("div.not-found"),modal:document.querySelector("div.modal"),modalProduct:document.querySelector("div.modal-product"),closeModalBtn:document.querySelector(".modal__close-btn"),loadMoreBtn:document.querySelector(".load-more-btn"),searchForm:document.querySelector(".search-form"),clearSearchFormBtn:document.querySelector(".search-form__btn-clear")};function C(t){const r=["All",...t].map(s=>`<li class="categories__item">
      <button class="categories__btn" type="button">${s}</button>
    </li>`).join("");o.categoriesList.innerHTML=r}function w(t){const e=t.map(({id:r,thumbnail:s,description:l,title:u,brand:p,category:m,price:g})=>`<li class="products__item" data-id="${r}">
    <img class="products__image" src="${s}" alt="${l}"/>
    <p class="products__title">${u}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: </span>${p||"no brand"}</p>
    <p class="products__category">Category: ${m}</p>
    <p class="products__price">Price: ${g}$</p>
 </li>`).join("");o.productsList.insertAdjacentHTML("beforeend",e)}function G(t){const{images:e,title:r,description:s,tags:l,price:u,shippingInformation:p,returnPolicy:m}=t,g=`<img class="modal-product__img" src="${e[0]}" alt="${r}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${r}</p>
        <ul class="modal-product__tags">${l}</ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping: ${p}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: ${u}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;o.modalProduct.innerHTML=g}async function d(){try{let t=B();const{products:e,total:r}=await t();e.length===0?R():(w(e),F(r))}catch(t){console.error(`Get products error: ${t}`)}}function B(){let t;switch(c.FLAG){case"All":t=$;break;case"Category":t=b;break;case"Search":t=k;break}return t}function F(t){Math.ceil(t/n)>c.PAGE?o.loadMoreBtn.classList.remove("is-hidden"):o.loadMoreBtn.classList.add("is-hidden")}function R(){o.notFoundBlock.classList.add("not-found--visible")}function _(){o.productsList.innerHTML=""}function M(t){const e=document.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}function L(){const t=document.querySelector(".categories__btn--active");t&&t.classList.remove("categories__btn--active")}function y(){o.notFoundBlock.classList.remove("not-found--visible")}function E(){o.loadMoreBtn.classList.add("is-hidden")}function T(){o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",h),o.modal.addEventListener("click",A)}function f(){o.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",h),o.modal.removeEventListener("click",A)}function h(t){t.code==="Escape"&&f()}function A(t){t.target===o.modal&&f()}async function q(){try{const t=await v();C(t)}catch(t){console.error(`Get categories error: ${t}`)}await d()}async function U(t){const e=t.target.closest(".categories__btn");e&&(c.PAGE=1,c.QUERY=e.textContent,c.QUERY==="All"?c.FLAG="All":c.FLAG="Category",M(e),_(),y(),E(),await d())}async function D(t){const e=t.target.closest("li.products__item");if(!e)return;const r=e.dataset.id;try{const s=await S(r);G(s),T()}catch(s){console.error(`Get product error: ${s}`)}}async function O(t){t.preventDefault();const r=new FormData(t.target).get("searchValue").trim();if(!r){alert("type something");return}L(),_(),y(),E(),c.QUERY=r,c.PAGE=1,c.FLAG="Search",d()}async function Y(){o.searchForm.reset(),c.QUERY="All",c.PAGE=1,c.FLAG="All",_(),y(),L(),await d()}async function H(){c.PAGE+=1,await d()}document.addEventListener("DOMContentLoaded",q);o.categoriesList.addEventListener("click",U);o.productsList.addEventListener("click",D);o.closeModalBtn.addEventListener("click",f);o.loadMoreBtn.addEventListener("click",H);o.searchForm.addEventListener("submit",O);o.clearSearchFormBtn.addEventListener("click",Y);
//# sourceMappingURL=index.js.map
