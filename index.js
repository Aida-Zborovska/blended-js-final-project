import"./assets/styles-DAE99nJD.js";import{a}from"./assets/vendor-2s9xPmg-.js";const L="https://dummyjson.com",r={CATEGORIES:"products/category-list",PRODUCTS:"products",CATEGORY:"products/category/"},m=12,n={QUERY:"All",PAGE:1};a.defaults.baseURL=L;async function E(){return(await a.get(r.CATEGORIES)).data}async function P(){const t=(n.PAGE-1)*m;let o;return n.QUERY==="All"?o=r.PRODUCTS:o=`${r.CATEGORY}${n.QUERY}`,(await a.get(`${o}?limit=${m}&skip=${t}`)).data}async function v(t){return(await a.get(`${r.PRODUCTS}/${t}`)).data}const e={categoriesList:document.querySelector("ul.categories"),productsList:document.querySelector("ul.products"),notFoundBlock:document.querySelector("div.not-found"),modal:document.querySelector("div.modal"),modalProduct:document.querySelector("div.modal-product"),closeModalBtn:document.querySelector(".modal__close-btn"),loadMoreBtn:document.querySelector(".load-more-btn")};function $(t){const c=["All",...t].map(s=>`<li class="categories__item">
      <button class="categories__btn" type="button">${s}</button>
    </li>`).join("");e.categoriesList.innerHTML=c}function b(t){const o=t.map(({id:c,thumbnail:s,description:i,title:d,brand:l,category:u,price:p})=>`<li class="products__item" data-id="${c}">
    <img class="products__image" src="${s}" alt="${i}"/>
    <p class="products__title">${d}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: </span>${l||"no brand"}</p>
    <p class="products__category">Category: ${u}</p>
    <p class="products__price">Price: ${p}$</p>
 </li>`).join("");e.productsList.insertAdjacentHTML("beforeend",o)}function k(t){const{images:o,title:c,description:s,tags:i,price:d,shippingInformation:l,returnPolicy:u}=t,p=`<img class="modal-product__img" src="${o[0]}" alt="${c}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${c}</p>
        <ul class="modal-product__tags">${i}</ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping: ${l}</p>
        <p class="modal-product__return-policy">Return Policy: ${u}</p>
        <p class="modal-product__price">Price: ${d}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;e.modalProduct.innerHTML=p}function h(){e.productsList.innerHTML=""}function A(t){const o=document.querySelector(".categories__btn--active");o&&o.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}async function _(){try{const{products:t,total:o}=await P();t.length===0?w():(b(t),S(o))}catch(t){console.error(`Get products error: ${t}`)}}function w(){e.notFoundBlock.classList.add("not-found--visible")}function C(){e.notFoundBlock.classList.remove("not-found--visible")}function S(t){Math.ceil(t/m)>n.PAGE?e.loadMoreBtn.classList.remove("is-hidden"):e.loadMoreBtn.classList.add("is-hidden")}function B(){e.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",y),e.modal.addEventListener("click",f)}function g(){e.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",y),e.modal.removeEventListener("click",f)}function y(t){t.code==="Escape"&&g()}function f(t){t.target===e.modal&&g()}async function M(){try{const t=await E();$(t)}catch(t){console.error(`Get categories error: ${t}`)}await _()}async function R(t){const o=t.target.closest(".categories__btn");o&&(h(),A(o),C(),n.PAGE=1,n.QUERY=o.textContent,await _())}async function T(t){const o=t.target.closest("li.products__item");if(!o)return;const c=o.dataset.id;try{const s=await v(c);k(s),B()}catch(s){console.error(`Get product error: ${s}`)}}async function G(){n.PAGE+=1,await _()}document.addEventListener("DOMContentLoaded",M);e.categoriesList.addEventListener("click",R);e.productsList.addEventListener("click",T);e.closeModalBtn.addEventListener("click",g);e.loadMoreBtn.addEventListener("click",G);
//# sourceMappingURL=index.js.map
