import{A as b,a as l,P as i,S as s,r as o,b as C,c as v,u as B,d as w,e as c,i as y,f as F,g as S,T as G,t as M}from"./assets/header-DQENJync.js";import{a as d}from"./assets/vendor-2s9xPmg-.js";d.defaults.baseURL=b;async function R(){return(await d.get(l.CATEGORIES)).data}async function W(){const t=(s.PAGE-1)*i;return(await d.get(`${l.PRODUCTS}?limit=${i}&skip=${t}`)).data}async function H(){const t=(s.PAGE-1)*i;return(await d.get(`${l.CATEGORY}${s.QUERY}?limit=${i}&skip=${t}`)).data}async function x(){const t=(s.PAGE-1)*i;return(await d.get(`${l.SEARCH}?q=${s.QUERY}&limit=${i}&skip=${t}`)).data}async function U(t){return(await d.get(`${l.PRODUCTS}/${t}`)).data}function D(t){const a=["All",...t].map(n=>`<li class="categories__item">
      <button class="categories__btn" type="button">${n}</button>
    </li>`).join("");o.categoriesList.innerHTML=a}function I(t){const e=t.map(({id:a,thumbnail:n,description:m,title:p,brand:g,category:h,price:f})=>`<li class="products__item" data-id="${a}">
    <img class="products__image" src="${n}" alt="${m}"/>
    <p class="products__title">${p}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: </span>${g||"no brand"}</p>
    <p class="products__category">Category: ${h}</p>
    <p class="products__price">Price: ${f}$</p>
 </li>`).join("");o.productsList.insertAdjacentHTML("beforeend",e)}function Y(t){const{id:e,images:a,title:n,description:m,tags:p,price:g,shippingInformation:h,returnPolicy:f}=t,k=`<img class="modal-product__img" src="${a[0]}" alt="${n}" />
      <div class="modal-product__content" data-id="${e}">
        <p class="modal-product__title">${n}</p>
        <ul class="modal-product__tags">${p}</ul>
        <p class="modal-product__description">${m}</p>
        <p class="modal-product__shipping-information">Shipping: ${h}</p>
        <p class="modal-product__return-policy">Return Policy: ${f}</p>
        <p class="modal-product__price">Price: ${g}$</p>
      </div>`;o.modalProduct.innerHTML=k}async function u(){try{let t=O();const{products:e,total:a}=await t();e.length===0?q():(I(e),Q(a))}catch(t){console.error(`Get products error: ${t}`)}}function O(){let t;switch(s.FLAG){case"All":t=W;break;case"Category":t=H;break;case"Search":t=x;break}return t}function Q(t){Math.ceil(t/i)>s.PAGE?o.loadMoreBtn.classList.remove("is-hidden"):o.loadMoreBtn.classList.add("is-hidden")}function q(){o.notFoundBlock.classList.add("not-found--visible")}function _(){o.productsList.innerHTML=""}function N(t){const e=document.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}function P(){const t=document.querySelector(".categories__btn--active");t&&t.classList.remove("categories__btn--active")}function L(){o.notFoundBlock.classList.remove("not-found--visible")}function A(){o.loadMoreBtn.classList.add("is-hidden")}const r={addToCart:"Add to Cart",removeFromCart:"Remove from Cart",addToWishlist:"Add to Wishlist",removeFromWishlist:"Remove from Wishlist"};o.addToCardBtn.addEventListener("click",K);o.addToWishlistBtn.addEventListener("click",V);function j(){o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",T),o.modal.addEventListener("click",$),s.ID=o.modal.querySelector(".modal-product__content").dataset.id,z(),X()}function E(){o.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",T),o.modal.removeEventListener("click",$)}function K(t){const e=t.target;e.textContent===r.addToCart?(C(c.cart),e.textContent=r.removeFromCart):(v(c.cart),e.textContent=r.addToCart),B()}function V(t){const e=t.target;e.textContent===r.addToWishlist?(C(c.wishlist),e.textContent=r.removeFromWishlist):(v(c.wishlist),e.textContent=r.addToWishlist),w()}function T(t){t.code==="Escape"&&E()}function $(t){t.target===o.modal&&E()}function X(){const t=y(c.wishlist);o.addToWishlistBtn.textContent=t?r.removeFromWishlist:r.addToWishlist}function z(){const t=y(c.cart);o.addToCardBtn.textContent=t?r.removeFromCart:r.addToCart}async function J(){at(),F();try{const t=await R();D(t)}catch(t){console.error(`Get categories error: ${t}`)}await u()}async function Z(t){const e=t.target.closest(".categories__btn");e&&(s.PAGE=1,s.QUERY=e.textContent,s.QUERY==="All"?s.FLAG="All":s.FLAG="Category",N(e),_(),L(),A(),await u())}async function tt(t){const e=t.target.closest("li.products__item");if(!e)return;const a=e.dataset.id;try{const n=await U(a);Y(n)}catch(n){console.error(`Get product error: ${n}`)}j()}async function et(t){t.preventDefault();const a=new FormData(t.target).get("searchValue").trim();if(!a){alert("type something");return}P(),_(),L(),A(),s.QUERY=a,s.PAGE=1,s.FLAG="Search",u()}async function ot(){o.searchForm.reset(),s.QUERY="All",s.PAGE=1,s.FLAG="All",_(),L(),P(),await u()}async function st(){s.PAGE+=1,await u()}function at(){const t=S();document.body.setAttribute("data-theme",t),document.body.dataset.theme=t,o.themeToggleBtn.innerHTML=t===G.light?"üåô":"‚òÄÔ∏è"}document.addEventListener("DOMContentLoaded",J);o.themeToggleBtn.addEventListener("click",M);o.categoriesList.addEventListener("click",Z);o.productsList.addEventListener("click",tt);o.closeModalBtn.addEventListener("click",E);o.loadMoreBtn.addEventListener("click",st);o.searchForm.addEventListener("submit",et);o.clearSearchFormBtn.addEventListener("click",ot);
//# sourceMappingURL=index.js.map
