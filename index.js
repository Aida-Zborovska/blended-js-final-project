import"./assets/styles-DAE99nJD.js";import{a as d}from"./assets/vendor-2s9xPmg-.js";const B="https://dummyjson.com",l={CATEGORIES:"products/category-list",PRODUCTS:"products",CATEGORY:"products/category/",SEARCH:"products/search"},a=12,r={QUERY:"All",PAGE:1,FLAG:"All",ID:1};d.defaults.baseURL=B;async function w(){return(await d.get(l.CATEGORIES)).data}async function F(){const t=(r.PAGE-1)*a;return(await d.get(`${l.PRODUCTS}?limit=${a}&skip=${t}`)).data}async function G(){const t=(r.PAGE-1)*a;return(await d.get(`${l.CATEGORY}${r.QUERY}?limit=${a}&skip=${t}`)).data}async function R(){const t=(r.PAGE-1)*a;return(await d.get(`${l.SEARCH}?q=${r.QUERY}&limit=${a}&skip=${t}`)).data}async function I(t){return(await d.get(`${l.PRODUCTS}/${t}`)).data}const o={categoriesList:document.querySelector("ul.categories"),productsList:document.querySelector("ul.products"),notFoundBlock:document.querySelector("div.not-found"),modal:document.querySelector("div.modal"),modalProduct:document.querySelector("div.modal-product"),closeModalBtn:document.querySelector(".modal__close-btn"),loadMoreBtn:document.querySelector(".load-more-btn"),searchForm:document.querySelector(".search-form"),clearSearchFormBtn:document.querySelector(".search-form__btn-clear"),addToCardBtn:document.querySelector(".modal-product__btn--cart"),addToWishlistBtn:document.querySelector(".modal-product__btn--wishlist")};function M(t){const n=["All",...t].map(s=>`<li class="categories__item">
      <button class="categories__btn" type="button">${s}</button>
    </li>`).join("");o.categoriesList.innerHTML=n}function q(t){const e=t.map(({id:n,thumbnail:s,description:m,title:p,brand:f,category:g,price:h})=>`<li class="products__item" data-id="${n}">
    <img class="products__image" src="${s}" alt="${m}"/>
    <p class="products__title">${p}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: </span>${f||"no brand"}</p>
    <p class="products__category">Category: ${g}</p>
    <p class="products__price">Price: ${h}$</p>
 </li>`).join("");o.productsList.insertAdjacentHTML("beforeend",e)}function D(t){const{id:e,images:n,title:s,description:m,tags:p,price:f,shippingInformation:g,returnPolicy:h}=t,k=`<img class="modal-product__img" src="${n[0]}" alt="${s}" />
      <div class="modal-product__content" data-id="${e}">
        <p class="modal-product__title">${s}</p>
        <ul class="modal-product__tags">${p}</ul>
        <p class="modal-product__description">${m}</p>
        <p class="modal-product__shipping-information">Shipping: ${g}</p>
        <p class="modal-product__return-policy">Return Policy: ${h}</p>
        <p class="modal-product__price">Price: ${f}$</p>
      </div>`;o.modalProduct.innerHTML=k}async function u(){try{let t=W();const{products:e,total:n}=await t();e.length===0?O():(q(e),x(n))}catch(t){console.error(`Get products error: ${t}`)}}function W(){let t;switch(r.FLAG){case"All":t=F;break;case"Category":t=G;break;case"Search":t=R;break}return t}function x(t){Math.ceil(t/a)>r.PAGE?o.loadMoreBtn.classList.remove("is-hidden"):o.loadMoreBtn.classList.add("is-hidden")}function O(){o.notFoundBlock.classList.add("not-found--visible")}function _(){o.productsList.innerHTML=""}function U(t){const e=document.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}function v(){const t=document.querySelector(".categories__btn--active");t&&t.classList.remove("categories__btn--active")}function L(){o.notFoundBlock.classList.remove("not-found--visible")}function C(){o.loadMoreBtn.classList.add("is-hidden")}const i={cart:"cart",wishlist:"wishlist",theme:"theme"};function S(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch{console.error("Error saving to LocalStorage: ${err}")}}function y(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch{return console.error("Error loading from LocalStorage: ${err}"),[]}}function A(t){return y(t).some(n=>n===r.ID)}function P(t){const e=y(t);e.some(s=>s===r.ID)||(e.push(r.ID),S(t,e))}function $(t){const e=y(t),n=e.findIndex(s=>s===r.ID);n!==-1&&(e.splice(n,1),S(t,e))}const c={addToCart:"Add to Cart",removeFromCart:"Remove from Cart",addToWishlist:"Add to Wishlist",removeFromWishlist:"Remove from Wishlist"};o.addToCardBtn.addEventListener("click",H);o.addToWishlistBtn.addEventListener("click",N);function Y(){o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",T),o.modal.addEventListener("click",b),r.ID=o.modal.querySelector(".modal-product__content").dataset.id,j(),Q()}function E(){o.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",T),o.modal.removeEventListener("click",b)}function H(t){const e=t.target;e.textContent===c.addToCart?(P(i.cart),e.textContent=c.removeFromCart):($(i.cart),e.textContent=c.addToCart)}function N(t){const e=t.target;e.textContent===c.addToWishlist?(P(i.wishlist),e.textContent=c.removeFromWishlist):($(i.wishlist),e.textContent=c.addToWishlist)}function T(t){t.code==="Escape"&&E()}function b(t){t.target===o.modal&&E()}function Q(){const t=A(i.wishlist);o.addToWishlistBtn.textContent=t?c.removeFromWishlist:c.addToWishlist}function j(){const t=A(i.cart);o.addToCardBtn.textContent=t?c.removeFromCart:c.addToCart}async function J(){try{const t=await w();M(t)}catch(t){console.error(`Get categories error: ${t}`)}await u()}async function K(t){const e=t.target.closest(".categories__btn");e&&(r.PAGE=1,r.QUERY=e.textContent,r.QUERY==="All"?r.FLAG="All":r.FLAG="Category",U(e),_(),L(),C(),await u())}async function V(t){const e=t.target.closest("li.products__item");if(!e)return;const n=e.dataset.id;try{const s=await I(n);D(s)}catch(s){console.error(`Get product error: ${s}`)}Y()}async function X(t){t.preventDefault();const n=new FormData(t.target).get("searchValue").trim();if(!n){alert("type something");return}v(),_(),L(),C(),r.QUERY=n,r.PAGE=1,r.FLAG="Search",u()}async function z(){o.searchForm.reset(),r.QUERY="All",r.PAGE=1,r.FLAG="All",_(),L(),v(),await u()}async function Z(){r.PAGE+=1,await u()}document.addEventListener("DOMContentLoaded",J);o.categoriesList.addEventListener("click",K);o.productsList.addEventListener("click",V);o.closeModalBtn.addEventListener("click",E);o.loadMoreBtn.addEventListener("click",Z);o.searchForm.addEventListener("submit",X);o.clearSearchFormBtn.addEventListener("click",z);
//# sourceMappingURL=index.js.map
