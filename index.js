import"./assets/styles-DAE99nJD.js";import{a as d}from"./assets/vendor-2s9xPmg-.js";const A="https://dummyjson.com",a={CATEGORIES:"products/category-list",PRODUCTS:"products",CATEGORY:"products/category/",SEARCH:"products/search"},i=12,r={QUERY:"All",PAGE:1};d.defaults.baseURL=A;async function S(){return(await d.get(a.CATEGORIES)).data}async function k(){const t=(r.PAGE-1)*i;let e;return r.QUERY==="All"?e=a.PRODUCTS:e=`${a.CATEGORY}${r.QUERY}`,(await d.get(`${e}?limit=${i}&skip=${t}`)).data}async function w(t){return(await d.get(`${a.PRODUCTS}/${t}`)).data}async function C(){const t=(r.PAGE-1)*i;return(await d.get(`${a.SEARCH}?q=${r.QUERY}&limit=${i}&skip=${t}`)).data}const o={categoriesList:document.querySelector("ul.categories"),productsList:document.querySelector("ul.products"),notFoundBlock:document.querySelector("div.not-found"),modal:document.querySelector("div.modal"),modalProduct:document.querySelector("div.modal-product"),closeModalBtn:document.querySelector(".modal__close-btn"),loadMoreBtn:document.querySelector(".load-more-btn"),searhForm:document.querySelector(".search-form"),clearSearchFormBtn:document.querySelector(".search-form__btn-clear")};function R(t){const s=["All",...t].map(c=>`<li class="categories__item">
      <button class="categories__btn" type="button">${c}</button>
    </li>`).join("");o.categoriesList.innerHTML=s}function E(t){const e=t.map(({id:s,thumbnail:c,description:n,title:u,brand:p,category:m,price:_})=>`<li class="products__item" data-id="${s}">
    <img class="products__image" src="${c}" alt="${n}"/>
    <p class="products__title">${u}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: </span>${p||"no brand"}</p>
    <p class="products__category">Category: ${m}</p>
    <p class="products__price">Price: ${_}$</p>
 </li>`).join("");o.productsList.insertAdjacentHTML("beforeend",e)}function B(t){const{images:e,title:s,description:c,tags:n,price:u,shippingInformation:p,returnPolicy:m}=t,_=`<img class="modal-product__img" src="${e[0]}" alt="${s}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${s}</p>
        <ul class="modal-product__tags">${n}</ul>
        <p class="modal-product__description">${c}</p>
        <p class="modal-product__shipping-information">Shipping: ${p}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: ${u}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;o.modalProduct.innerHTML=_}function g(){o.productsList.innerHTML=""}function L(t){const e=document.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),t.classList.add("categories__btn--active")}function M(){const t=document.querySelector(".categories__btn--active");t&&t.classList.remove("categories__btn--active")}async function l(){try{const{products:t,total:e}=await k();t.length===0?h():(E(t),v(e))}catch(t){console.error(`Get products error: ${t}`)}}function h(){o.notFoundBlock.classList.add("not-found--visible")}function f(){o.notFoundBlock.classList.remove("not-found--visible")}function v(t){Math.ceil(t/i)>r.PAGE?o.loadMoreBtn.classList.remove("is-hidden"):o.loadMoreBtn.classList.add("is-hidden")}function P(){o.loadMoreBtn.classList.add("is-hidden")}function G(){o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",$),o.modal.addEventListener("click",b)}function y(){o.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",$),o.modal.removeEventListener("click",b)}function $(t){t.code==="Escape"&&y()}function b(t){t.target===o.modal&&y()}async function T(){try{const t=await S();R(t)}catch(t){console.error(`Get categories error: ${t}`)}await l()}async function q(t){const e=t.target.closest(".categories__btn");e&&(g(),L(e),f(),P(),r.PAGE=1,r.QUERY=e.textContent,await l())}async function F(t){const e=t.target.closest("li.products__item");if(!e)return;const s=e.dataset.id;try{const c=await w(s);B(c),G()}catch(c){console.error(`Get product error: ${c}`)}}async function U(t){t.preventDefault();const s=new FormData(t.target).get("searchValue").trim();if(!s){alert("type something");return}g(),f(),M(),P(),r.QUERY=s,r.PAGE=1;try{const{products:c,total:n}=await C();c.length===0?h():(E(c),v(n))}catch(c){console.error(`Get product error: ${c}`)}t.target.reset()}async function D(){o.searhForm.reset(),r.QUERY="All",r.PAGE=1,g(),f(),L(),await l()}async function O(){r.PAGE+=1,await l()}document.addEventListener("DOMContentLoaded",T);o.categoriesList.addEventListener("click",q);o.productsList.addEventListener("click",F);o.closeModalBtn.addEventListener("click",y);o.loadMoreBtn.addEventListener("click",O);o.searhForm.addEventListener("submit",U);o.clearSearchFormBtn.addEventListener("click",D);
//# sourceMappingURL=index.js.map
