import"./assets/styles-DAE99nJD.js";import{a as d}from"./assets/vendor-2s9xPmg-.js";const b="https://dummyjson.com",a={CATEGORIES:"products/category-list",PRODUCTS:"products",CATEGORY:"products/category/",SEARCH:"products/search"},i=12,c={QUERY:"All",PAGE:1};d.defaults.baseURL=b;async function A(){return(await d.get(a.CATEGORIES)).data}async function k(){const t=(c.PAGE-1)*i;let e;return c.QUERY==="All"?e=a.PRODUCTS:e=`${a.CATEGORY}${c.QUERY}`,(await d.get(`${e}?limit=${i}&skip=${t}`)).data}async function S(t){return(await d.get(`${a.PRODUCTS}/${t}`)).data}async function w(){const t=(c.PAGE-1)*i;return(await d.get(`${a.SEARCH}?q=${c.QUERY}&limit=${i}&skip=${t}`)).data}const o={categoriesList:document.querySelector("ul.categories"),productsList:document.querySelector("ul.products"),notFoundBlock:document.querySelector("div.not-found"),modal:document.querySelector("div.modal"),modalProduct:document.querySelector("div.modal-product"),closeModalBtn:document.querySelector(".modal__close-btn"),loadMoreBtn:document.querySelector(".load-more-btn"),searhForm:document.querySelector(".search-form"),clearSearchFormBtn:document.querySelector(".search-form__btn-clear")};function C(t){const s=["All",...t].map(r=>`<li class="categories__item">
      <button class="categories__btn" type="button">${r}</button>
    </li>`).join("");o.categoriesList.innerHTML=s}function L(t){const e=t.map(({id:s,thumbnail:r,description:n,title:u,brand:p,category:m,price:_})=>`<li class="products__item" data-id="${s}">
    <img class="products__image" src="${r}" alt="${n}"/>
    <p class="products__title">${u}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: </span>${p||"no brand"}</p>
    <p class="products__category">Category: ${m}</p>
    <p class="products__price">Price: ${_}$</p>
 </li>`).join("");o.productsList.insertAdjacentHTML("beforeend",e)}function R(t){const{images:e,title:s,description:r,tags:n,price:u,shippingInformation:p,returnPolicy:m}=t,_=`<img class="modal-product__img" src="${e[0]}" alt="${s}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${s}</p>
        <ul class="modal-product__tags">${n}</ul>
        <p class="modal-product__description">${r}</p>
        <p class="modal-product__shipping-information">Shipping: ${p}</p>
        <p class="modal-product__return-policy">Return Policy: ${m}</p>
        <p class="modal-product__price">Price: ${u}$</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>`;o.modalProduct.innerHTML=_}function g(){o.productsList.innerHTML=""}function f(t){const e=document.querySelector(".categories__btn--active");e&&e.classList.remove("categories__btn--active"),t&&t.classList.add("categories__btn--active")}async function l(){try{const{products:t,total:e}=await k();t.length===0?h():(L(t),P(e))}catch(t){console.error(`Get products error: ${t}`)}}function h(){o.notFoundBlock.classList.add("not-found--visible")}function y(){o.notFoundBlock.classList.remove("not-found--visible")}function P(t){Math.ceil(t/i)>c.PAGE?o.loadMoreBtn.classList.remove("is-hidden"):o.loadMoreBtn.classList.add("is-hidden")}function B(){o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",$),o.modal.addEventListener("click",v)}function E(){o.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",$),o.modal.removeEventListener("click",v)}function $(t){t.code==="Escape"&&E()}function v(t){t.target===o.modal&&E()}async function G(){try{const t=await A();C(t)}catch(t){console.error(`Get categories error: ${t}`)}await l()}async function M(t){const e=t.target.closest(".categories__btn");e&&(g(),f(e),y(),c.PAGE=1,c.QUERY=e.textContent,await l())}async function T(t){const e=t.target.closest("li.products__item");if(!e)return;const s=e.dataset.id;try{const r=await S(s);R(r),B()}catch(r){console.error(`Get product error: ${r}`)}}async function F(t){t.preventDefault();const s=new FormData(t.target).get("searchValue").trim();if(!s){alert("type something");return}g(),y(),f(),c.QUERY=s,c.PAGE=1;try{const{products:r,total:n}=await w();r.length===0?h():(L(r),P(n))}catch(r){console.error(`Get product error: ${r}`)}t.target.reset()}async function q(){o.searhForm.reset(),c.QUERY="All",c.PAGE=1,g(),y(),f(),await l()}async function U(){c.PAGE+=1,await l()}document.addEventListener("DOMContentLoaded",G);o.categoriesList.addEventListener("click",M);o.productsList.addEventListener("click",T);o.closeModalBtn.addEventListener("click",E);o.loadMoreBtn.addEventListener("click",U);o.searhForm.addEventListener("submit",F);o.clearSearchFormBtn.addEventListener("click",q);
//# sourceMappingURL=index.js.map
